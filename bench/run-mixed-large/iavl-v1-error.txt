root@iavl-benchmarking:~/iavl-bench# iavl-bench-all bench/all-default.jsonc --changeset-dir ~/bench-data/mixed-large/
2025/09/12 22:20:54 INFO writing results to /root/iavl-bench/bench/run-20250912_222054
2025/09/12 22:20:54 INFO starting run run_plan="{\"name\":\"iavl-v1\",\"runner\":\"bench-iavl-v1\",\"options\":null}"
2025/09/12 22:20:54 INFO executing runner command cmd="/root/go/bin/bench-iavl-v1 bench --changeset-dir /root/bench-data/mixed-large/ --db-dir /root/iavl-bench/bench/run-20250912_222054/iavl-v1-tmp --log-type json --log-file /root/iavl-bench/bench/run-20250912_222054/iavl-v1.jsonl"
2025/09/14 10:00:45 ERROR error running benchmark error="exit status 2" output="fatal error: sync: unlock of unlocked mutex\n\ngoroutine 1 [running]:\ninternal/sync.fatal({0xebf9c2?, 0x45d9?})\n\t/usr/local/go/src/runtime/panic.go:1056 +0x18\ninternal/sync.(*Mutex).unlockSlow(0xc00028a600, 0xffffffff)\n\t/usr/local/go/src/internal/sync/mutex.go:204 +0x35\ninternal/sync.(*Mutex).Unlock(...)\n\t/usr/local/go/src/internal/sync/mutex.go:198\nsync.(*Mutex).Unlock(...)\n\t/usr/local/go/src/sync/mutex.go:65\ngithub.com/cosmos/iavl.(*BatchWithFlusher).Set(0xc00028a600, {0xc0140bab80, 0xd, 0xd}, {0xc025658800, 0x4618, 0x4800})\n\t/root/go/pkg/mod/github.com/cosmos/iavl@v1.3.5/batch.go:63 +0x16d\ngithub.com/cosmos/iavl.(*nodeDB).SaveNode(0xc0000baff0, 0xc00dd59a40)\n\t/root/go/pkg/mod/github.com/cosmos/iavl@v1.3.5/nodedb.go:252 +0x2a3\ngithub.com/cosmos/iavl.(*MutableTree).saveNewNodes(0xc00049e230, 0x4d19?)\n\t/root/go/pkg/mod/github.com/cosmos/iavl@v1.3.5/mutable_tree.go:1074 +0xef\ngithub.com/cosmos/iavl.(*MutableTree).SaveVersion(0xc00049e230)\n\t/root/go/pkg/mod/github.com/cosmos/iavl@v1.3.5/mutable_tree.go:771 +0x58e\nmain.(*MultiTreeWrapper).Commit(0xc0000a6240)\n\t/root/iavl-bench/iavl-v1/main.go:41 +0x6c\ngithub.com/cosmos/iavl-bench/bench.applyVersion(0xc000274430, {0xffb220, 0xc0000a6240}, {0x7ffddad0b43a?, 0x1d?}, {0x7ffddad0b461, 0x36}, 0x4d19, 0xc012acb668)\n\t/root/iavl-bench/bench/runner.go:332 +0x87c\ngithub.com/cosmos/iavl-bench/bench.run({0xffb220, 0xc0000a6240}, {0x7ffddad0b43a, 0x1d}, {0x4e20, {0xc0001b9200, 0x3, 0x4}, {0xc0001f4dc0, 0x3, ...}}, ...)\n\t/root/iavl-bench/bench/runner.go:211 +0x397\ngithub.com/cosmos/iavl-bench/bench.NewRunner.func1(0xc0003f2700?, {0xe9cd85?, 0x4?, 0xe9cbc9?})\n\t/root/iavl-bench/bench/runner.go:160 +0xae5\ngithub.com/spf13/cobra.(*Command).execute(0xc0003bc908, {0xc000017d80, 0x8, 0x8})\n\t/root/go/pkg/mod/github.com/spf13/cobra@v1.7.0/command.go:940 +0x88a\ngithub.com/spf13/cobra.(*Command).ExecuteC(0xc0003bcc08)\n\t/root/go/pkg/mod/github.com/spf13/cobra@v1.7.0/command.go:1068 +0x398\ngithub.com/spf13/cobra.(*Command).Execute(...)\n\t/root/go/pkg/mod/github.com/spf13/cobra@v1.7.0/command.go:992\ngithub.com/cosmos/iavl-bench/bench.Runner.Run({0xea2328?})\n\t/root/iavl-bench/bench/runner.go:60 +0x18\ngithub.com/cosmos/iavl-bench/bench.Run({0xea2328?, 0xc000190068?}, {0xf039a8?, {0x0?, 0x0?}})\n\t/root/iavl-bench/bench/runner.go:52 +0x2c\nmain.main()\n\t/root/iavl-bench/iavl-v1/main.go:55 +0x2a\n\ngoroutine 13 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*session).refLoop(0xc0000bb1d0)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/session_util.go:189 +0x51c\ncreated by github.com/syndtr/goleveldb/leveldb.newSession in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/session.go:93 +0x296\n\ngoroutine 39 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0xc000103340)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:92 +0x149\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:148 +0x447\n\ngoroutine 40 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0xc000103340)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_state.go:101 +0x9c\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:149 +0x485\n\ngoroutine 41 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).tCompaction(0xc000103340)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:845 +0x6b7\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:157 +0x50b\n\ngoroutine 42 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0xc000103340)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:782 +0xf3\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:158 +0x547\n\ngoroutine 43 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*session).refLoop(0xc0000ba960)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/session_util.go:189 +0x51c\ncreated by github.com/syndtr/goleveldb/leveldb.newSession in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/session.go:93 +0x296\n\ngoroutine 44 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0xc0002d6c40)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:108 +0x37b\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:148 +0x447\n\ngoroutine 45 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0xc0002d6c40)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_state.go:101 +0x9c\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:149 +0x485\n\ngoroutine 46 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).compactionTransact(0xc0002d6c40, {0xea9499, 0xb}, {0xff9ca0, 0xc00b83a460})\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:227 +0x4fc\ngithub.com/syndtr/goleveldb/leveldb.(*DB).tableCompaction(0xc0002d6c40, 0xc0001f0000, 0x0)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:592 +0x53e\ngithub.com/syndtr/goleveldb/leveldb.(*DB).tableAutoCompaction(0xc0002d6c40)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:656 +0x34\ngithub.com/syndtr/goleveldb/leveldb.(*DB).tCompaction(0xc0002d6c40)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:872 +0x475\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:157 +0x50b\n\ngoroutine 47 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0xc0002d6c40)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:782 +0xf3\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:158 +0x547\n\ngoroutine 48 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*session).refLoop(0xc0000baf00)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/session_util.go:189 +0x51c\ncreated by github.com/syndtr/goleveldb/leveldb.newSession in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/session.go:93 +0x296\n\ngoroutine 14 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0xc0002d7dc0)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:92 +0x149\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:148 +0x447\n\ngoroutine 15 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0xc0002d7dc0)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_state.go:101 +0x9c\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:149 +0x485\n\ngoroutine 16 [syscall]:\nsyscall.Syscall(0x4a, 0x43f, 0x0, 0x0)\n\t/usr/local/go/src/syscall/syscall_linux.go:74 +0x25\nsyscall.Fsync(0x7730bd?)\n\t/usr/local/go/src/syscall/zsyscall_linux_amd64.go:463 +0x25\ninternal/poll.(*FD).Fsync.func1(...)\n\t/usr/local/go/src/internal/poll/fd_fsync_posix.go:18\ninternal/poll.ignoringEINTR(...)\n\t/usr/local/go/src/internal/poll/fd_posix.go:74\ninternal/poll.(*FD).Fsync(0xe8?)\n\t/usr/local/go/src/internal/poll/fd_fsync_posix.go:17 +0xe7\nos.(*File).Sync(0xc00a929128)\n\t/usr/local/go/src/os/file_posix.go:166 +0x3b\ngithub.com/syndtr/goleveldb/leveldb/storage.(*fileWrap).Sync(0xc012521a40)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/storage/file_storage.go:592 +0x1f\ngithub.com/syndtr/goleveldb/leveldb.(*tWriter).finish(0xc017dd3740)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/table.go:583 +0xb7\ngithub.com/syndtr/goleveldb/leveldb.(*tableCompactionBuilder).flush(0xc00b89a5a0)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:408 +0x31\ngithub.com/syndtr/goleveldb/leveldb.(*tableCompactionBuilder).run(0xc00b89a5a0, 0xc00d1a1be0)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:480 +0x5b5\ngithub.com/syndtr/goleveldb/leveldb.(*DB).compactionTransact(0xc0002d7dc0, {0xea9499, 0xb}, {0xff9ca0, 0xc00b89a5a0})\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:187 +0x1e9\ngithub.com/syndtr/goleveldb/leveldb.(*DB).tableCompaction(0xc0002d7dc0, 0xc0000cac60, 0x0)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:592 +0x53e\ngithub.com/syndtr/goleveldb/leveldb.(*DB).tableAutoCompaction(0xc0002d7dc0)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:656 +0x34\ngithub.com/syndtr/goleveldb/leveldb.(*DB).tCompaction(0xc0002d7dc0)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:872 +0x475\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:157 +0x50b\n\ngoroutine 50 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).memCompaction(0xc0002d7dc0)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:288 +0x1f6\ngithub.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0xc0002d7dc0)\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db_compaction.go:786 +0x76\ncreated by github.com/syndtr/goleveldb/leveldb.openDB in goroutine 1\n\t/root/go/pkg/mod/github.com/syndtr/goleveldb@v1.0.1-0.20220721030215-126854af5e6d/leveldb/db.go:158 +0x547\n"

